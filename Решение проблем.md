#websoft #решения 

**Трудности с загрузкой и прикреплением файла - баг #37667**
Описание: при попытке прикрепить иконку к стандартному объекту(is_std=1), при сохранении возникает диалоговое окно "Объект стандартный. Хотите ли изменить его?"
При нажатии на Да, подгруженный файл удаляется и поэтому возникает ошибка - Файл не найден. Данная проблема проявилась в компоненте Конструктор приложений(applications_designer) и была устранена. Чтобы устранить что-то похожее, следует изучить функцию в библиотеке и файл BS.

**Отчет - не отображается список сотрудников или курсов/тестов в диалоговом окне - баг #49316**
Бывают ситуации, когда в шапке отчета имеется блок ролевой модели:
```
<WITH VAR="oModelRoles" EVALUATE-ONCE="1" EXPR="
    curUser = tools.get_cur_user();
    var sApplicationID = ( tools_app.get_cur_application() == null ? '' : tools_app.get_cur_application().id.Value );
    var oModelRolesParams = {};
    oModelRolesParams.bIncludeFactSubordForHRRole = true;
    oModelRolesParams.bNotReturnSubordiates = true;
    oModelRolesParams.bNotReturnSubdivisions = true;
    oModelRolesParams.bNotReturnGroups = true;
    oModelRolesRes = CallServerMethod( 'tools_report', 'model_roles', [ curUser.id.Value, sApplicationID, 'test', oModelRolesParams ]);
    return oModelRolesRes;
">
```

Тут и кроется проблема. Третий параметр **model_roles** для **CallServerMethod( 'tools_report')**, в данном случае - 'test' прописан на основании наличия записи 'test' в выборке:

```
curUserAccessBlocks = tools.get_cur_user_access_blocks();
```

Чтобы устранить проблемы с отображением данных в диалоговом окне, надо найти "свою" запись в этом перечне.

Полный список:

```
{
    "access_bloc": [
        {
            "id": "personnel_document",
        },

        {
            "id": "recommended_service",
        },

        {
            "id": "collaborator_schedule",
        },

        {

            "id": "wiki",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "mobile",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "proctoring",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "chatbots",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "exs",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "crmsale",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "secur",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "prize",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "library",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "game",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "courselab",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "vclass",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "edu_settings",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "dnoffice",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "test_adv",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "calendar_items",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "knowlcntrl_settings",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "pwt",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "dist_settings",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "comp_ben_settings",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "crm",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "crm_settings",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "pers_settings",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "comp_ben",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "outstaff",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "continuity",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "admin",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "project_management",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "prop",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "recr",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "ass",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "test",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "fin",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "web",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "edu",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "career",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "sub",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "knowlcntrl",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "dist",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "pers",

            "can_read": true,

            "can_write": true,

            "can_delete": true

        },

        {

            "id": "test_settings",

            "can_read": false,

            "can_write": false,

            "can_delete": false

        }

    ]

}
```
