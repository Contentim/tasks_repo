#websoft #решения 

**Трудности с загрузкой и прикреплением файла - баг #37667**
Описание: при попытке прикрепить иконку к стандартному объекту(is_std=1), при сохранении возникает диалоговое окно "Объект стандартный. Хотите ли изменить его?"
При нажатии на Да, подгруженный файл удаляется и поэтому возникает ошибка - Файл не найден. Данная проблема проявилась в компоненте Конструктор приложений(applications_designer) и была устранена. Чтобы устранить что-то похожее, следует изучить функцию в библиотеке и файл BS.

**Отчет - не отображается список сотрудников или курсов/тестов в диалоговом окне - баг #49316**
Бывают ситуации, когда в шапке отчета имеется блок ролевой модели:
```
<WITH VAR="oModelRoles" EVALUATE-ONCE="1" EXPR="
    curUser = tools.get_cur_user();
    var sApplicationID = ( tools_app.get_cur_application() == null ? '' : tools_app.get_cur_application().id.Value );
    var oModelRolesParams = {};
    oModelRolesParams.bIncludeFactSubordForHRRole = true;
    oModelRolesParams.bNotReturnSubordiates = true;
    oModelRolesParams.bNotReturnSubdivisions = true;
    oModelRolesParams.bNotReturnGroups = true;
    oModelRolesRes = CallServerMethod( 'tools_report', 'model_roles', [ curUser.id.Value, sApplicationID, 'test', oModelRolesParams ]);
    return oModelRolesRes;
">
```

Тут и кроется проблема. Третий параметр **model_roles** для **CallServerMethod( 'tools_report')**, в данном случае - 'test' прописан на основании наличия записи 'test' в выборке:

```
curUserAccessBlocks = tools.get_cur_user_access_blocks();
```

Чтобы устранить проблемы с отображением данных в диалоговом окне, надо найти "свою" запись в этом перечне.

Полный список значений массива:

```
"personnel_document", // КЭДО
"recommended_service", // Рекомендательный сервис
"collaborator_schedule", // График сотрудника
"wiki", // Wiki
"mobile", // Мобильный WebSoft HCM
"proctoring", // Прокторинг
"chatbots", // Чат-боты
"exs", // Обмен данными
"crmsale", // CRM
"secur", // Безопасность
"prize", // Премирование
"library", // Библиотека
"game", // Геймификация
"courselab", // CourseLab
"vclass", // Виртуальный класс
"edu_settings", // Настройки
"dnoffice", // Деканат
"test_adv", // Тест эксперт
"calendar_items", // Календарь
"knowlcntrl_settings", // Справочники карты знаний
"pwt", // Personal WebSoft HCM
"dist_settings", // Настройки
"comp_ben_settings", // Справочники
"crm", // CRM
"crm_settings", // Справочники
"pers_settings", // 5mrwmycid9
"comp_ben", // Компенсации и льготы
"outstaff", // Временный персонал
"continuity", // План преемственности
"admin", // Дизайнер
"project_management", // Проекты
"prop", // Системное администрирование
"recr", // Подбор персонала
"ass", // Оценка персонала
"test", // Тестирование
"fin", // Финансы
"web", // Портал
"edu", // Учебный центр
"career", // Развитие карьеры

"sub", // Организационная структура

"knowlcntrl", // Управление знаниями
"objects_access": ",knowledge_classifier,knowledge_part,knowledge_profile,expert,expert_question,acquaint,tag,acquaint_assign,knowledge_part_level,knowledge_part_type,wiki_article_type,wiki_article_communication_type,wiki_base,wiki_article,wiki_article_communication,knowledge_acquaint,",
            
"dist", // Дистанционное обучение
"objects_access": ",course,active_learning,learning,course_module,event,event_result,connection,learning_storage,activity,activity_state,statement,profile,learning_task,learning_task_result,statement_actor,statement_object,statement_component,statement_pattern,statement_attachment,statement_additional,",

"pers", // Персонал
"objects_access": ",collaborator,position_common,qualification_assignment,group,section_instruction,position_common_instruction,statistic_data,position_family,reprimand,potential_grade,efficiency_grade,",
```
