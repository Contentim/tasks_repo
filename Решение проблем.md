#websoft #решения 

**Трудности с загрузкой и прикреплением файла - баг #37667**
Описание: при попытке прикрепить иконку к стандартному объекту(is_std=1), при сохранении возникает диалоговое окно "Объект стандартный. Хотите ли изменить его?"
При нажатии на Да, подгруженный файл удаляется и поэтому возникает ошибка - Файл не найден. Данная проблема проявилась в компоненте Конструктор приложений(applications_designer) и была устранена. Чтобы устранить что-то похожее, следует изучить функцию в библиотеке и файл BS.

**Отчет - не отображается список сотрудников или курсов/тестов в диалоговом окне - баг #49316**
Бывают ситуации, когда в шапке отчета имеется блок ролевой модели:
```
<WITH VAR="oModelRoles" EVALUATE-ONCE="1" EXPR="
    curUser = tools.get_cur_user();
    var sApplicationID = ( tools_app.get_cur_application() == null ? '' : tools_app.get_cur_application().id.Value );
    var oModelRolesParams = {};
    oModelRolesParams.bIncludeFactSubordForHRRole = true;
    oModelRolesParams.bNotReturnSubordiates = true;
    oModelRolesParams.bNotReturnSubdivisions = true;
    oModelRolesParams.bNotReturnGroups = true;
    oModelRolesRes = CallServerMethod( 'tools_report', 'model_roles', [ curUser.id.Value, sApplicationID, 'test', oModelRolesParams ]);
    return oModelRolesRes;
">
```

Тут и кроется проблема. Третий параметр **model_roles** для **CallServerMethod( 'tools_report')**, в данном случае - 'test' прописан на основании наличия записи 'test' в выборке:

```
curUserAccessBlocks = tools.get_cur_user_access_blocks();
```

Чтобы устранить проблемы с отображением данных в диалоговом окне, надо найти "свою" запись в этом перечне.

Полный список значений массива:

```
"personnel_document", // КЭДО
"recommended_service", // Рекомендательный сервис
"collaborator_schedule", // График сотрудника
"wiki", // Wiki
"mobile", // Мобильный WebSoft HCM
"proctoring", // Прокторинг
"chatbots", // Чат-боты
"exs", // Обмен данными
"crmsale", // CRM
"secur", // Безопасность
"prize", // Премирование
"objects_access": ",kpi_profile,kpi,pa,kpi_value,kpi_plan,bonus_item,bonus_profile,",
            
"library", // Библиотека
"objects_access": ",library_material,library_material_item,library_section,library_material_type,library_material_source_type,library_player,library_material_format,library_material_comment,library_material_viewing,exchange_server,upload_package,system_event,certificate_type,operation,license,",
            
"game", // Геймификация
"objects_access": ",qualification,qualification_assignment,level,transaction,account,good,good_type,good_instance,basket,order,",
            
"courselab", // CourseLab
"objects_access": ",cl_course,cl_video_course,cl_module,cl_slide,cl_shape,cl_object,cl_localization,cl_const,exchange_server,upload_package,system_event,certificate_type,operation,",
            
"vclass", // Виртуальный класс
"objects_access": ",education_org,education_method,event,event_result,covenant,lector,",
            
"edu_settings", // Настройки
"objects_access": ",place,order_type,organizational_form,event_form,contract_type,certificate_type,event_type,object_resource,provider_course_type,vclass_setting,presentation,",
            
"dnoffice", // Деканат
"objects_access": ",dn_auditorium,dn_discipline,dn_block_discipline,dn_academ_year,dn_term,dn_control_form,dn_educat_form,dn_educat_event,dn_special,dn_specialization,dn_program_discipl,dn_prog_disc_append,dn_edu_condition,dn_train_method_complex,dn_student,dn_stud_centrtest_result,dn_stud_group,dn_stream,dn_subject_plan,dn_ind_educat_plan,dn_work_curriculum,dn_schedule,dn_lesson,dn_control_event,dn_register,dn_academ_debt,",
            
"test_adv", // Тест эксперт
"objects_access": ",assessment,test_project,item,active_test_learning,test_learning,",
            
"calendar_items", // Календарь
"objects_access": "",

"knowlcntrl_settings", // Справочники карты знаний
"objects_access": ",knowledge_part_level,knowledge_part_type,wiki_article_type,wiki_article_communication_type,",
            
"pwt", // Personal WebSoft HCM
"objects_access": "",
            
"dist_settings", // Настройки
"objects_access": ",verb,",
            
"comp_ben_settings", // Справочники
"objects_access": ",benefit,salary_survey_source,payment_type,position_level,policy_type,salary_payment_type,work_schedule_type,working_condition_type,work_form,",
            
"crm", // CRM
"objects_access": ",contact,contact_type,contact_result,",
            
"crm_settings", // Справочники
"objects_access": ",contact_type,contact_result,",
            
"pers_settings", // Настройки
"objects_access": ",region,reprimand_type,substitution_type,person_state,contact_type,contact_result,qualification,section_instruction,category,profession,profession_category,appointment_type,personnel_event_type,",
            
"comp_ben", // Компенсации и льготы
"objects_access": ",salary_survey,payment,benefit_item,benefit_profile,policy,salary_payment_type,work_schedule_type,working_condition_type,work_form,working_condition,",
            
"outstaff", // Временный персонал
"objects_access": ",outstaff_provider,outstaff_contract,outstaff_order,outstaff_order_execution,reprimand,outstaff_type_material,outstaff_additional_work,",
            
"continuity", // План преемственности
"objects_access": ",key_position,successor,development_potential,efficiency_estimation,risk_perspective,risk_level,key_position_threat,readiness_level,",
            
"admin", // Дизайнер
"objects_access": ",custom_report,remote_action,remote_collection,code_library,server_agent,access_block,workflow,request_type,response_type,notification,notification_template,notification_system,web_design,event_result_type,print_form,user_assignment,doc_type,custom_web_template,custom_web_template_group,submission,system_event,system_event_handler,operation,override_web_template,custom_admin_template,statistic_rec,statistic_data,active_web_template,external_system,walkthrough,script_queue_elem,web_mode,application,application_instance,admin_configuration,view_configuration,qa_test_block,qa_test,qa_test_set,qa_test_paramset,qa_test_result,recommender_algorithm,object_data_type,object_param,",
            
"project_management", // Проекты
"objects_access": ",project,project_participant,task,contact,project_type,task_type,project_participant_role,",
            
"prop", // Системное администрирование
"objects_access": ",discharge,download_package,package,action_report,coding,server_logs,plugin,webinar_system,library_system,proctoring_system,testing_system,recruitment_system,resource_type,web_rule,host,auth_type,channel_provider,file_source,",
            
"recr", // Подбор персонала
"objects_access": ",collaborator,vacancy,vacancy_response,resume,selected_vacancy,vacancy_subscription,recommendation,recruitment_plan,recruitment_method,vacancy_type,candidate_source,candidate_status_type,work_schedule,vacancy_source,selected_resume,estaff_event_type,estaff_event,education_type,education_form,skill_type,work_condition,vacancy_reason,work_mode,wage_system,material_liability,work_experience,education_mode,personal_data_processing_consent,recruitment_event,",
            
"ass", // Оценка персонала
"objects_access": ",kpi,kpi_profile,kpi_group,kpi_plan,kpi_value,competence,indicator,competence_profile,competence_block,assessment_appraise,pa,assessment_plan,supplementary_question,assessment_result_recommend,development_plan,position_assessment_form,grade,development_method,assessment_appraise_matrix,competence_profile_family,rating,exercise,event_assessment_plan,action_report,task,scale,formula,",
            
"test", // Тестирование
"objects_access": ",assessment,item,active_test_learning,test_learning,event,event_result,connection,learning_record,",
            
"fin", // Финансы
"objects_access": ",cost_center,expense_item,budget_period,pay_phase,budget,budget_type,",

"web", // Портал
"objects_access": ",document,document_comment_entry,forum,forum_entry,forum_theme_read_by_collaborator,poll,poll_result,poll_procedure,chat,banner,subscription,blog,blog_entry,blog_entry_comment,submission,contest,site,like,change,repositorium,",
            
"edu", // Учебный центр
"objects_access": ",education_org,compound_program,education_program,education_method,event,event_result,education_plan,training_plan,covenant,lector,traning_order,order_type,contest,participant,group,event_assessment_plan,certificate,vendor_state,org_vendor_state,contract,contract_type,cost_center,expense_item,budget_period,pay_phase,budget,budget_type,calendar_event,",

"career", // Развитие карьеры
"objects_access": ",career_reserve_by_types,career_reserve,personnel_reserve,career_plan,career_tree,typical_development_program,career_reserve_type,personnel_committee,committee_member,professional_area,exclusion_reason,talent_pool_nomination,talent_pool_func_manager,tutor,skill,professional_area_type,",
            
"sub", // Организационная структура
"objects_access": ",collaborator,position,subdivision,subdivision_group,org,position_common,position_common_instruction,position_family,staff_position,staff_position_start,staff_position_finish,staff_position_move,substitution,personnel_event,",
            
"knowlcntrl", // Управление знаниями
"objects_access": ",knowledge_classifier,knowledge_part,knowledge_profile,expert,expert_question,acquaint,tag,acquaint_assign,knowledge_part_level,knowledge_part_type,wiki_article_type,wiki_article_communication_type,wiki_base,wiki_article,wiki_article_communication,knowledge_acquaint,",
            
"dist", // Дистанционное обучение
"objects_access": ",course,active_learning,learning,course_module,event,event_result,connection,learning_storage,activity,activity_state,statement,profile,learning_task,learning_task_result,statement_actor,statement_object,statement_component,statement_pattern,statement_attachment,statement_additional,",

"pers", // Персонал
"objects_access": ",collaborator,position_common,qualification_assignment,group,section_instruction,position_common_instruction,statistic_data,position_family,reprimand,potential_grade,efficiency_grade,",
```
