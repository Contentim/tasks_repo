#websoft #ролевая_модель #помощь

В системе для всех приложений используется унифицированная ролевая модель. Она применяется как при настройке приложений (какой роли какие действия доступны), так и “зашивается” в программном коде выборок. Что позволяет использовать одни и те же выборки в разных приложениях без каких-либо сюрпризов.

Роли:

- **Администратор приложения (10)** - обязательно для приложения
    - полный доступ ко всем настройкам; 
    - полный доступ ко всем разделам;
    - полный доступ ко всем действиям;
    - в разделах отображаются все данные.
- **Администратор безопасности (8)** - добавляется по необходимости, если есть потребность в отдельном доступе к приложению АИБа
    - доступ к настройкам по необходимости;
    - доступ к разделам по необходимости;
    - доступ к действиям по необходимости;
    - отображаемые в разделах данные по необходимости.
- **Администратор процесса (7)** - добавляется по необходимости, если есть настройки
    - полный доступ к бизнес-разделам. При этом могут быть скрыты разделы для настройки, например, для настройки типов отзывов, типов уведомлений и пр.;
    - доступа к настройкам нет;
    - в разделах отображаются все данные.
- **HR (5)** - добавляется по необходимости, если есть потребность в ограничении доступа с привязкой к оргструктуре
    - доступа к настройкам нет;
    - доступ к разделам по необходимости;
    - доступ ко всем действиям в доступных разделах;
    - в разделах данные, не привязанные к оргстурктуре, отображаются все;
    - в разделах данных, привязанные к оргструктуре (сотрудники, группы, назначенные курсы, адаптации и т.п.), отображаются только в пределах подчинения, то есть по всем сотрудникам и элементам оргструктуры, для которых пользователь является функциональным руководителем с типом, заданным в настройках приложения.
- **Эксперт в оргструктуре (4)** - обязательно добавляется в приложения, в которых одновременно есть роли **HR (5)** и **Эксперт (3)**.
    - доступа к настройкам нет;
    - доступ к разделам по необходимости;
    - доступ ко всем действиям в доступных разделах;
    - в разделах отображаются только категории, по которым пользователь назначен экспертом, а также объекты из этих категорий.
    - при показе/выборе в диалоге данных, привязанных к оргструктуре (сотрудники, группы, назначенные курсы, адаптации и т.п.), отображаются данные только в пределах подчинения, то есть по всем сотрудникам и элементам оргструктуры, для которых пользователь является функциональным руководителем с типом, заданным в настройках приложения.
- **Эксперт (3)** - добавляется по необходимости, если есть потребность ограничить доступ к объектам в пределах категорий
    - доступа к настройкам нет;
    - доступ к разделам по необходимости;
    - доступ ко всем действиям в доступных разделах;
    - в разделах отображаются только категории, по которым пользователь назначен экспертом, а также объекты из этих категорий;
    - при показе/выборе в диалоге данных, привязанных к оргструктуре (сотрудники, группы, назначенные курсы, адаптации и т.п.), отображаются все данные.
- **Владелец объектов (2)** - добавляется по необходимости, если есть потребность ограничить доступ по конкретным объектам. В зависимости от бизнес-процесса владелец может видеть только “свои” объекты (владелец процедур оценки видит только “свои” процедуры, тренер видит только “свои” мероприятия и т.п.) или все объекты (владелец компетенций, владелец КПЭ и т.п.). При этом в обоих случаях изменять владелец может только свои объекты.
    - доступа к настройкам нет;
    - доступ к разделам по необходимости;
    - доступ ко всем действиям в доступных разделах;
    - в зависимости от бизнес-процесса в разделах отображаются или все объекты, или только те, для которых пользователь является владельцем. Способ установки владельца зависит от каталога. В целевом варианте запланирован переход на использование отдельного каталога владельцев;
    - при показе/выборе в диалоге данных, привязанных к оргструктуре (сотрудники, группы, назначенные курсы, адаптации и т.п.), отображаются данные только в пределах подчинения, то есть по всем сотрудникам и элементам оргструктуры, для которых пользователь является функциональным руководителем с со специальной операцией;
    - при показе/выборе в диалоге данных, НЕ привязанных к оргструктуре, отображаются все данные.
- **Наблюдатель (1)** - обязательно для приложения
    - доступа к настройкам нет;
    - доступ к разделам по необходимости;
    - доступа действиям нет (кроме открытия помощи);
    - в разделах отображаются данные только в пределах подчинения, то есть по всем сотрудникам и элементам оргструктуры, для которых пользователь является функциональным руководителем с любым типом.

Особое внимание уделяем выборкам. Аналитик принимает решение о том, должна ли выборка поддерживать ролевую модель. 

Алгоритм.

1. В выборку не включаем ролевую модель, то есть выборка всегда возвращает полный список объект, если:
    1. она возвращает какие-либо справочники или “технические” каталоги;
    2. в этих справочниках нет категорий;
    3. в этих справочниках нет владельцев;
    4. Примеры: типы мероприятий, типы кадровых резервов, типы графика, семейства должностей и пр.
2. В выборку включаем только поддержку роли 3, если (для роли 3 возвращает объекты только по категориям, где пользователь эксперт, для всех остальных ролей - полный список объкетов):
    1. она возвращает какие-либо справочники или “технические” каталоги;
    2. в этих справочниках есть категории;
    3. Примеры: типы страниц, выборки, курсы, и т.п.
3. Во всех остальных случаях в core-выборках реализуем полную ролевую модель
    1. 10, 7, 2 - полный список объектов;
    2. 5 - список объектов по подчинению с указанным типом;
    3. 3 - если есть категории в каталоге;
    4. 1 - список объектов по подчинению с любым типом.
4. Во всех остальных случаях в выборках для конкретных приложений реализуем ролевую модель, которая прописана в этом конкретном приложении.